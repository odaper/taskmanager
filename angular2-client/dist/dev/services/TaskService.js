var http_1 = require("services/http");
var config_1 = require("../config");
var task_1 = require('../components/tasks/task');
var AuthenticationService_1 = require('services/AuthenticationService');
var TaskServiceRestImpl = (function () {
    function TaskServiceRestImpl() {
    }
    TaskServiceRestImpl.prototype.getTasks = function () {
        return http_1.$http.get(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/", this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.addTask = function (task) {
        console.log("TaskServiceRestImpl.addTask: " + task.title);
        task.setUsername(this.getUserData().username);
        return http_1.$http.post(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/", task, this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.updateTask = function (task) {
        task.setUsername(this.getUserData().username);
        return http_1.$http.put(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/" + task._id + "/", task, this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.deleteTask = function (task) {
        return http_1.$http.delete(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/" + task._id + "/", task, this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.getUserData = function () {
        var token = localStorage.getItem("jwt");
        return { username: new AuthenticationService_1.AuthenticationService().getUsername(token), token: token };
    };
    return TaskServiceRestImpl;
})();
exports.TaskServiceRestImpl = TaskServiceRestImpl;
var TaskServiceOfflineImpl = (function () {
    function TaskServiceOfflineImpl() {
        this.goRun = new task_1.Task("Go for a run", 1);
        this.goShower = new task_1.Task("Go have a shower", 2);
        this.tasks = [];
        this.tasks.push(this.goRun);
        this.tasks.push(this.goShower);
    }
    TaskServiceOfflineImpl.prototype.getTasks = function () {
        var that = this;
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: that.tasks });
        });
    };
    TaskServiceOfflineImpl.prototype.addTask = function (task) {
        var nextId = this.tasks.length++;
        task.setId(nextId);
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: nextId } });
        });
    };
    TaskServiceOfflineImpl.prototype.updateTask = function (task) {
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: task._id } });
        });
    };
    TaskServiceOfflineImpl.prototype.deleteTask = function (task) {
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: task._id } });
        });
    };
    return TaskServiceOfflineImpl;
})();
exports.TaskServiceOfflineImpl = TaskServiceOfflineImpl;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL1Rhc2tTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbIlRhc2tTZXJ2aWNlUmVzdEltcGwiLCJUYXNrU2VydmljZVJlc3RJbXBsLmNvbnN0cnVjdG9yIiwiVGFza1NlcnZpY2VSZXN0SW1wbC5nZXRUYXNrcyIsIlRhc2tTZXJ2aWNlUmVzdEltcGwuYWRkVGFzayIsIlRhc2tTZXJ2aWNlUmVzdEltcGwudXBkYXRlVGFzayIsIlRhc2tTZXJ2aWNlUmVzdEltcGwuZGVsZXRlVGFzayIsIlRhc2tTZXJ2aWNlUmVzdEltcGwuZ2V0VXNlckRhdGEiLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsIiwiVGFza1NlcnZpY2VPZmZsaW5lSW1wbC5jb25zdHJ1Y3RvciIsIlRhc2tTZXJ2aWNlT2ZmbGluZUltcGwuZ2V0VGFza3MiLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLmFkZFRhc2siLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLnVwZGF0ZVRhc2siLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLmRlbGV0ZVRhc2siXSwibWFwcGluZ3MiOiJBQUFBLHFCQUFvQixlQUFlLENBQUMsQ0FBQTtBQUNwQyx1QkFBd0IsV0FBVyxDQUFDLENBQUE7QUFDcEMscUJBQW1CLDBCQUEwQixDQUFDLENBQUE7QUFDOUMsc0NBQW9DLGdDQUFnQyxDQUFDLENBQUE7QUFTckU7SUFBQUE7SUF3Q0FDLENBQUNBO0lBbkNPRCxzQ0FBUUEsR0FBZkE7UUFDQ0UsTUFBTUEsQ0FBQ0EsWUFBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0Esa0JBQVNBLEdBQUdBLGFBQWFBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLEVBQUVBLENBQUNBLFFBQVFBLEdBQUdBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLFdBQVdBLEVBQUVBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO0lBQzNHQSxDQUFDQTtJQU1NRixxQ0FBT0EsR0FBZEEsVUFBZUEsSUFBVUE7UUFDeEJHLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLCtCQUEr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QUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQTtRQUNqQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFDbkJBLE1BQU1BLENBQUNBLElBQUlBLE9BQU9BLENBQ2pCQSxVQUFTQSxPQUFPQSxFQUFFQSxNQUFNQTtZQUN2QixPQUFPLENBQUMsRUFBQyxZQUFZLEVBQUUsRUFBQyxHQUFHLEVBQUUsTUFBTSxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQ3hDLENBQUMsQ0FDREEsQ0FBQ0E7SUFDSEEsQ0FBQ0E7SUFDTUgsMkNBQVVBLEdBQWpCQSxVQUFrQkEsSUFBVUE7UUFFM0JJLE1BQU1BLENBQUNBLElBQUlBLE9BQU9BLENBQ2pCQSxVQUFTQSxPQUFPQSxFQUFFQSxNQUFNQTtZQUN2QixPQUFPLENBQUMsRUFBQyxZQUFZLEVBQUUsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBQyxFQUFDLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQ0RBLENBQUNBO0lBQ0hBLENBQUNBO0lBQ01KLDJDQUFVQSxHQUFqQkEsVUFBa0JBLElBQVVBO1FBRTNCSyxNQUFNQSxDQUFDQSxJQUFJQSxPQUFPQSxDQUNqQkEsVUFBU0EsT0FBT0EsRUFBRUEsTUFBTUE7WUFDdkIsT0FBTyxDQUFDLEVBQUMsWUFBWSxFQUFFLEVBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUMsRUFBQyxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUNEQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUNGTCw2QkFBQ0E7QUFBREEsQ0E5Q0EsQUE4Q0NBLElBQUE7QUE5Q1ksOEJBQXNCLHlCQThDbEMsQ0FBQSIsImZpbGUiOiJzZXJ2aWNlcy9UYXNrU2VydmljZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7JGh0dHB9IGZyb20gXCJzZXJ2aWNlcy9odHRwXCI7XG5pbXBvcnQge1JFU1RfSE9TVH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xuaW1wb3J0IHtUYXNrfSBmcm9tICcuLi9jb21wb25lbnRzL3Rhc2tzL3Rhc2snO1xuaW1wb3J0IHtBdXRoZW50aWNhdGlvblNlcnZpY2V9IGZyb20gJ3NlcnZpY2VzL0F1dGhlbnRpY2F0aW9uU2VydmljZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza1NlcnZpY2Uge1xuXHRnZXRUYXNrcygpOiBQcm9taXNlPGFueT47XG5cdGFkZFRhc2sodGFzazpUYXNrKTogUHJvbWlzZTxhbnk+O1xuXHR1cGRhdGVUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT47XG5cdGRlbGV0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55Pjtcbn1cblxuZXhwb3J0IGNsYXNzIFRhc2tTZXJ2aWNlUmVzdEltcGwgaW1wbGVtZW50cyBUYXNrU2VydmljZSB7XG5cblx0LyoqXG5cdCAqIEByZXR1cm5zIGEgbGlzdCBvZiBUYXNrIG9iamVjdHMgYXMgYSBKYXZhU2NyaXB0IEFycmF5XG5cdCAqL1xuXHRwdWJsaWMgZ2V0VGFza3MoKTogUHJvbWlzZTxhbnk+IHtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KFJFU1RfSE9TVCArIFwiL2FwaS90YXNrcy9cIiArIHRoaXMuZ2V0VXNlckRhdGEoKS51c2VybmFtZSArIFwiL1wiLCB0aGlzLmdldFVzZXJEYXRhKCkudG9rZW4pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB0YXNrIGlzIGEgVGFzayBvYmplY3Rcblx0ICogQHJldHVybnMgc2VydmVyIF9pZCBvZiBuZXdseSBjcmVhdGVkIHRhc2tcblx0ICovXG5cdHB1YmxpYyBhZGRUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT4ge1xuXHRcdGNvbnNvbGUubG9nKFwiVGFza1NlcnZpY2VSZXN0SW1wbC5hZGRUYXNrOiBcIiArIHRhc2sudGl0bGUpO1xuXHRcdHRhc2suc2V0VXNlcm5hbWUodGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lKTtcblx0XHRyZXR1cm4gJGh0dHAucG9zdChSRVNUX0hPU1QgKyBcIi9hcGkvdGFza3MvXCIgKyB0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUgKyBcIi9cIiwgdGFzaywgdGhpcy5nZXRVc2VyRGF0YSgpLnRva2VuKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0gdGFzayBpcyBhIFRhc2sgb2JqZWN0XG5cdCAqIEByZXR1cm5zIHNlcnZlciBfaWQgb2YgdXBkYXRlZCB0YXNrXG5cdCAqL1xuXHRwdWJsaWMgdXBkYXRlVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+IHtcblx0XHR0YXNrLnNldFVzZXJuYW1lKHRoaXMuZ2V0VXNlckRhdGEoKS51c2VybmFtZSk7XG5cdFx0cmV0dXJuICRodHRwLnB1dChSRVNUX0hPU1QgKyBcIi9hcGkvdGFza3MvXCIgKyB0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUgKyBcIi9cIiArIHRhc2suX2lkICsgXCIvXCIsIHRhc2ssIHRoaXMuZ2V0VXNlckRhdGEoKS50b2tlbik7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHRhc2sgaXMgYSBUYXNrIG9iamVjdFxuXHQgKiBAcmV0dXJucyBzZXJ2ZXIgX2lkIG9mIGRlbGV0ZWQgdGFza1xuXHQgKi9cblx0cHVibGljIGRlbGV0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0cmV0dXJuICRodHRwLmRlbGV0ZShSRVNUX0hPU1QgKyBcIi9hcGkvdGFza3MvXCIgKyB0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUgKyBcIi9cIiArIHRhc2suX2lkICsgXCIvXCIsIHRhc2ssIHRoaXMuZ2V0VXNlckRhdGEoKS50b2tlbik7XG5cdH1cblxuXHRwcml2YXRlIGdldFVzZXJEYXRhKCkge1xuXHRcdGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiand0XCIpO1xuXHRcdHJldHVybiB7IHVzZXJuYW1lOiBuZXcgQXV0aGVudGljYXRpb25TZXJ2aWNlKCkuZ2V0VXNlcm5hbWUodG9rZW4pLCB0b2tlbjogdG9rZW4gfTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVGFza1NlcnZpY2VPZmZsaW5lSW1wbCBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcblx0cHJpdmF0ZSBnb1J1bjogVGFzayA9IG5ldyBUYXNrKFwiR28gZm9yIGEgcnVuXCIsIDEpO1xuXHRwcml2YXRlIGdvU2hvd2VyOiBUYXNrID0gbmV3IFRhc2soXCJHbyBoYXZlIGEgc2hvd2VyXCIsIDIpO1xuXHRwcml2YXRlIHRhc2tzOiBBcnJheTxUYXNrPiA9IFtdO1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMudGFza3MucHVzaCh0aGlzLmdvUnVuKTtcblx0XHR0aGlzLnRhc2tzLnB1c2godGhpcy5nb1Nob3dlcik7XG5cdH1cblxuXHQvL3tfaWQ6IDEsIHVzZXJfaWQ6IDEsIGRlc2NyaXB0aW9uOiBcImRlc2NyaXB0aW9uXCIsIHRpdGxlOiBcIkdvIGZvciBhIHJ1blwiLCBhc3NpZ25lZTogXCJBc3NpZ25lZVwifSxcblx0Ly97X2lkOiAyLCB1c2VyX2lkOiAxLCBkZXNjcmlwdGlvbjogXCJkZXNjcmlwdGlvblwiLCB0aXRsZTogXCJTaG93ZXJcIiwgYXNzaWduZWU6IFwiQXNzaWduZWVcIn0sXG5cblx0cHVibGljIGdldFRhc2tzKCk6IFByb21pc2U8YW55PiB7XG5cdFx0bGV0IHRoYXQgPSB0aGlzO1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShcblx0XHRcdGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRyZXNvbHZlKHthY3Rpb25SZXN1bHQ6IHRoYXQudGFza3N9KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cdHB1YmxpYyBhZGRUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT4ge1xuXHRcdGxldCBuZXh0SWQgPSB0aGlzLnRhc2tzLmxlbmd0aCsrO1xuXHRcdHRhc2suc2V0SWQobmV4dElkKTtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoXG5cdFx0XHRmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0cmVzb2x2ZSh7YWN0aW9uUmVzdWx0OiB7X2lkOiBuZXh0SWR9fSk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXHRwdWJsaWMgdXBkYXRlVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+IHtcblx0XHQvLyBUT0RPIGltcGxlbWVudFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShcblx0XHRcdGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRyZXNvbHZlKHthY3Rpb25SZXN1bHQ6IHtfaWQ6IHRhc2suX2lkfX0pO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH1cblx0cHVibGljIGRlbGV0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0Ly8gVE9ETyBpbXBsZW1lbnRcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoXG5cdFx0XHRmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0cmVzb2x2ZSh7YWN0aW9uUmVzdWx0OiB7X2lkOiB0YXNrLl9pZH19KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=