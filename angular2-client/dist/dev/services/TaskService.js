var http_1 = require("services/http");
var config_1 = require("../config");
var task_1 = require('../components/tasks/task');
var AuthenticationService_1 = require('services/AuthenticationService');
var TaskServiceRestImpl = (function () {
    function TaskServiceRestImpl() {
    }
    TaskServiceRestImpl.prototype.getTasks = function () {
        return http_1.$http.get(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/", this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.addTask = function (task) {
        task.setUsername(this.getUserData().username);
        if (task.isValid()) {
            return http_1.$http.post(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/", task, this.getUserData().token);
        }
        else {
            return new Promise(function (resolve, reject) {
                reject("task is not valid");
            });
        }
    };
    TaskServiceRestImpl.prototype.updateTask = function (task) {
        task.setUsername(this.getUserData().username);
        return http_1.$http.put(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/" + task._id + "/", task, this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.deleteTask = function (task) {
        return http_1.$http.delete(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/" + task._id + "/", task, this.getUserData().token);
    };
    TaskServiceRestImpl.prototype.getUserData = function () {
        var token = localStorage.getItem("jwt");
        return new User(new AuthenticationService_1.AuthenticationService().getUsername(token), token);
    };
    return TaskServiceRestImpl;
})();
exports.TaskServiceRestImpl = TaskServiceRestImpl;
var TaskServiceOfflineImpl = (function () {
    function TaskServiceOfflineImpl() {
        this.goRun = new task_1.Task("Go for a run", 1);
        this.goShower = new task_1.Task("Go have a shower", 2);
        this.tasks = [];
        this.tasks.push(this.goRun);
        this.tasks.push(this.goShower);
    }
    TaskServiceOfflineImpl.prototype.getTasks = function () {
        var that = this;
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: that.tasks });
        });
    };
    TaskServiceOfflineImpl.prototype.addTask = function (task) {
        var nextId = this.tasks.length++;
        task.setId(nextId);
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: nextId } });
        });
    };
    TaskServiceOfflineImpl.prototype.updateTask = function (task) {
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: task._id } });
        });
    };
    TaskServiceOfflineImpl.prototype.deleteTask = function (task) {
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: task._id } });
        });
    };
    return TaskServiceOfflineImpl;
})();
exports.TaskServiceOfflineImpl = TaskServiceOfflineImpl;
var User = (function () {
    function User(username, token) {
        this.username = username;
        this.token = token;
    }
    User.prototype.getUsername = function () {
        return this.username;
    };
    User.prototype.getToken = function () {
        return this.token;
    };
    return User;
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL1Rhc2tTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbIlRhc2tTZXJ2aWNlUmVzdEltcGwiLCJUYXNrU2VydmljZVJlc3RJbXBsLmNvbnN0cnVjdG9yIiwiVGFza1NlcnZpY2VSZXN0SW1wbC5nZXRUYXNrcyIsIlRhc2tTZXJ2aWNlUmVzdEltcGwuYWRkVGFzayIsIlRhc2tTZXJ2aWNlUmVzdEltcGwudXBkYXRlVGFzayIsIlRhc2tTZXJ2aWNlUmVzdEltcGwuZGVsZXRlVGFzayIsIlRhc2tTZXJ2aWNlUmVzdEltcGwuZ2V0VXNlckRhdGEiLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsIiwiVGFza1NlcnZpY2VPZmZsaW5lSW1wbC5jb25zdHJ1Y3RvciIsIlRhc2tTZXJ2aWNlT2ZmbGluZUltcGwuZ2V0VGFza3MiLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLmFkZFRhc2siLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLnVwZGF0ZVRhc2siLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLmRlbGV0ZVRhc2siLCJVc2VyIiwiVXNlci5jb25zdHJ1Y3RvciIsIlVzZXIuZ2V0VXNlcm5hbWUiLCJVc2VyLmdldFRva2VuIl0sIm1hcHBpbmdzIjoiQUFBQSxxQkFBb0IsZUFBZSxDQUFDLENBQUE7QUFDcEMsdUJBQXdCLFdBQVcsQ0FBQyxDQUFBO0FBQ3BDLHFCQUFtQiwwQkFBMEIsQ0FBQyxDQUFBO0FBQzlDLHNDQUFvQyxnQ0FBZ0MsQ0FBQyxDQUFBO0FBU3JFO0lBQUFBO0lBNkNBQyxDQUFDQTtJQXhDT0Qsc0NBQVFBLEdBQWZBO1FBQ0NFLE1BQU1BLENBQUNBLFlBQUtBLENBQUNBLEdBQUdBLENBQUNBLGtCQUFTQSxHQUFHQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQSxRQUFRQSxHQUFHQSxHQUFHQSxFQUFFQSxJQUFJQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQTtJQUMzR0EsQ0FBQ0E7SUFNTUYs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Q0ZMLDZCQUFDQTtBQUFEQSxDQTlDQSxBQThDQ0EsSUFBQTtBQTlDWSw4QkFBc0IseUJBOENsQyxDQUFBO0FBRUQ7SUFDQ00sY0FBbUJBLFFBQWdCQSxFQUFTQSxLQUFVQTtRQUFuQ0MsYUFBUUEsR0FBUkEsUUFBUUEsQ0FBUUE7UUFBU0EsVUFBS0EsR0FBTEEsS0FBS0EsQ0FBS0E7SUFBR0EsQ0FBQ0E7SUFDbkRELDBCQUFXQSxHQUFsQkE7UUFDQ0UsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7SUFDdEJBLENBQUNBO0lBQ01GLHVCQUFRQSxHQUFmQTtRQUNDRyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQTtJQUNuQkEsQ0FBQ0E7SUFDRkgsV0FBQ0E7QUFBREEsQ0FSQSxBQVFDQSxJQUFBIiwiZmlsZSI6InNlcnZpY2VzL1Rhc2tTZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHskaHR0cH0gZnJvbSBcInNlcnZpY2VzL2h0dHBcIjtcbmltcG9ydCB7UkVTVF9IT1NUfSBmcm9tIFwiLi4vY29uZmlnXCI7XG5pbXBvcnQge1Rhc2t9IGZyb20gJy4uL2NvbXBvbmVudHMvdGFza3MvdGFzayc7XG5pbXBvcnQge0F1dGhlbnRpY2F0aW9uU2VydmljZX0gZnJvbSAnc2VydmljZXMvQXV0aGVudGljYXRpb25TZXJ2aWNlJztcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrU2VydmljZSB7XG5cdGdldFRhc2tzKCk6IFByb21pc2U8YW55Pjtcblx0YWRkVGFzayh0YXNrOlRhc2spOiBQcm9taXNlPGFueT47XG5cdHVwZGF0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55Pjtcblx0ZGVsZXRlVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+O1xufVxuXG5leHBvcnQgY2xhc3MgVGFza1NlcnZpY2VSZXN0SW1wbCBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcblxuXHQvKipcblx0ICogQHJldHVybnMgYSBsaXN0IG9mIFRhc2sgb2JqZWN0cyBhcyBhIEphdmFTY3JpcHQgQXJyYXlcblx0ICovXG5cdHB1YmxpYyBnZXRUYXNrcygpOiBQcm9taXNlPGFueT4ge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoUkVTVF9IT1NUICsgXCIvYXBpL3Rhc2tzL1wiICsgdGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lICsgXCIvXCIsIHRoaXMuZ2V0VXNlckRhdGEoKS50b2tlbik7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHRhc2sgaXMgYSBUYXNrIG9iamVjdFxuXHQgKiBAcmV0dXJucyBzZXJ2ZXIgX2lkIG9mIG5ld2x5IGNyZWF0ZWQgdGFza1xuXHQgKi9cblx0cHVibGljIGFkZFRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0dGFzay5zZXRVc2VybmFtZSh0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUpO1xuXHRcdGlmICh0YXNrLmlzVmFsaWQoKSkge1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoUkVTVF9IT1NUICsgXCIvYXBpL3Rhc2tzL1wiICsgdGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lICsgXCIvXCIsIHRhc2ssIHRoaXMuZ2V0VXNlckRhdGEoKS50b2tlbik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0cmVqZWN0KFwidGFzayBpcyBub3QgdmFsaWRcIik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHRhc2sgaXMgYSBUYXNrIG9iamVjdFxuXHQgKiBAcmV0dXJucyBzZXJ2ZXIgX2lkIG9mIHVwZGF0ZWQgdGFza1xuXHQgKi9cblx0cHVibGljIHVwZGF0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0dGFzay5zZXRVc2VybmFtZSh0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUpO1xuXHRcdHJldHVybiAkaHR0cC5wdXQoUkVTVF9IT1NUICsgXCIvYXBpL3Rhc2tzL1wiICsgdGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lICsgXCIvXCIgKyB0YXNrLl9pZCArIFwiL1wiLCB0YXNrLCB0aGlzLmdldFVzZXJEYXRhKCkudG9rZW4pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB0YXNrIGlzIGEgVGFzayBvYmplY3Rcblx0ICogQHJldHVybnMgc2VydmVyIF9pZCBvZiBkZWxldGVkIHRhc2tcblx0ICovXG5cdHB1YmxpYyBkZWxldGVUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT4ge1xuXHRcdHJldHVybiAkaHR0cC5kZWxldGUoUkVTVF9IT1NUICsgXCIvYXBpL3Rhc2tzL1wiICsgdGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lICsgXCIvXCIgKyB0YXNrLl9pZCArIFwiL1wiLCB0YXNrLCB0aGlzLmdldFVzZXJEYXRhKCkudG9rZW4pO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRVc2VyRGF0YSgpIHtcblx0XHRsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImp3dFwiKTtcblx0XHRyZXR1cm4gbmV3IFVzZXIoPHN0cmluZz5uZXcgQXV0aGVudGljYXRpb25TZXJ2aWNlKCkuZ2V0VXNlcm5hbWUodG9rZW4pLCB0b2tlbik7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFRhc2tTZXJ2aWNlT2ZmbGluZUltcGwgaW1wbGVtZW50cyBUYXNrU2VydmljZSB7XG5cdHByaXZhdGUgZ29SdW46IFRhc2sgPSBuZXcgVGFzayhcIkdvIGZvciBhIHJ1blwiLCAxKTtcblx0cHJpdmF0ZSBnb1Nob3dlcjogVGFzayA9IG5ldyBUYXNrKFwiR28gaGF2ZSBhIHNob3dlclwiLCAyKTtcblx0cHJpdmF0ZSB0YXNrczogQXJyYXk8VGFzaz4gPSBbXTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLnRhc2tzLnB1c2godGhpcy5nb1J1bik7XG5cdFx0dGhpcy50YXNrcy5wdXNoKHRoaXMuZ29TaG93ZXIpO1xuXHR9XG5cblx0Ly97X2lkOiAxLCB1c2VyX2lkOiAxLCBkZXNjcmlwdGlvbjogXCJkZXNjcmlwdGlvblwiLCB0aXRsZTogXCJHbyBmb3IgYSBydW5cIiwgYXNzaWduZWU6IFwiQXNzaWduZWVcIn0sXG5cdC8ve19pZDogMiwgdXNlcl9pZDogMSwgZGVzY3JpcHRpb246IFwiZGVzY3JpcHRpb25cIiwgdGl0bGU6IFwiU2hvd2VyXCIsIGFzc2lnbmVlOiBcIkFzc2lnbmVlXCJ9LFxuXG5cdHB1YmxpYyBnZXRUYXNrcygpOiBQcm9taXNlPGFueT4ge1xuXHRcdGxldCB0aGF0ID0gdGhpcztcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoXG5cdFx0XHRmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0cmVzb2x2ZSh7YWN0aW9uUmVzdWx0OiB0aGF0LnRhc2tzfSk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXHRwdWJsaWMgYWRkVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+IHtcblx0XHRsZXQgbmV4dElkID0gdGhpcy50YXNrcy5sZW5ndGgrKztcblx0XHR0YXNrLnNldElkKG5leHRJZCk7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKFxuXHRcdFx0ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdHJlc29sdmUoe2FjdGlvblJlc3VsdDoge19pZDogbmV4dElkfX0pO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH1cblx0cHVibGljIHVwZGF0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0Ly8gVE9ETyBpbXBsZW1lbnRcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoXG5cdFx0XHRmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0cmVzb2x2ZSh7YWN0aW9uUmVzdWx0OiB7X2lkOiB0YXNrLl9pZH19KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cdHB1YmxpYyBkZWxldGVUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT4ge1xuXHRcdC8vIFRPRE8gaW1wbGVtZW50XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKFxuXHRcdFx0ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdHJlc29sdmUoe2FjdGlvblJlc3VsdDoge19pZDogdGFzay5faWR9fSk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxufVxuXG5jbGFzcyBVc2VyIHtcblx0Y29uc3RydWN0b3IocHVibGljIHVzZXJuYW1lOiBzdHJpbmcsIHB1YmxpYyB0b2tlbjogYW55KSB7fVxuXHRwdWJsaWMgZ2V0VXNlcm5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy51c2VybmFtZTtcblx0fVxuXHRwdWJsaWMgZ2V0VG9rZW4oKTogYW55IHtcblx0XHRyZXR1cm4gdGhpcy50b2tlbjtcblx0fVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9