var http_1 = require("services/http");
var config_1 = require("../config");
var task_1 = require('../components/tasks/task');
var AuthenticationService_1 = require('services/AuthenticationService');
var TaskServiceImpl = (function () {
    function TaskServiceImpl() {
    }
    TaskServiceImpl.prototype.getTasks = function () {
        return http_1.$http.get(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/", this.getUserData().token);
    };
    TaskServiceImpl.prototype.addTask = function (task) {
        task.setUsername(this.getUserData().username);
        return http_1.$http.post(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/", task, this.getUserData().token);
    };
    TaskServiceImpl.prototype.updateTask = function (task) {
        task.setUsername(this.getUserData().username);
        return http_1.$http.put(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/" + task._id + "/", task, this.getUserData().token);
    };
    TaskServiceImpl.prototype.deleteTask = function (task) {
        task.setUsername(this.getUserData().username);
        return http_1.$http.delete(config_1.REST_HOST + "/api/tasks/" + this.getUserData().username + "/" + task._id + "/", task, this.getUserData().token);
    };
    TaskServiceImpl.prototype.getUserData = function () {
        var token = localStorage.getItem("jwt");
        return { username: new AuthenticationService_1.AuthenticationService().getUsername(token), token: token };
    };
    return TaskServiceImpl;
})();
exports.TaskServiceImpl = TaskServiceImpl;
var TaskServiceOfflineImpl = (function () {
    function TaskServiceOfflineImpl() {
        this.goRun = new task_1.Task("Go for a run", 1);
        this.goShower = new task_1.Task("Go have a shower", 2);
        this.tasks = new Array();
        this.tasks.push(this.goRun);
        this.tasks.push(this.goShower);
    }
    TaskServiceOfflineImpl.prototype.getTasks = function () {
        var that = this;
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: that.tasks });
        });
    };
    TaskServiceOfflineImpl.prototype.addTask = function (task) {
        var nextId = this.tasks.length++;
        task.setId(nextId);
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: nextId } });
        });
    };
    TaskServiceOfflineImpl.prototype.updateTask = function (task) {
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: task._id } });
        });
    };
    TaskServiceOfflineImpl.prototype.deleteTask = function (task) {
        return new Promise(function (resolve, reject) {
            resolve({ actionResult: { _id: task._id } });
        });
    };
    return TaskServiceOfflineImpl;
})();
exports.TaskServiceOfflineImpl = TaskServiceOfflineImpl;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL1Rhc2tTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbIlRhc2tTZXJ2aWNlSW1wbCIsIlRhc2tTZXJ2aWNlSW1wbC5jb25zdHJ1Y3RvciIsIlRhc2tTZXJ2aWNlSW1wbC5nZXRUYXNrcyIsIlRhc2tTZXJ2aWNlSW1wbC5hZGRUYXNrIiwiVGFza1NlcnZpY2VJbXBsLnVwZGF0ZVRhc2siLCJUYXNrU2VydmljZUltcGwuZGVsZXRlVGFzayIsIlRhc2tTZXJ2aWNlSW1wbC5nZXRVc2VyRGF0YSIsIlRhc2tTZXJ2aWNlT2ZmbGluZUltcGwiLCJUYXNrU2VydmljZU9mZmxpbmVJbXBsLmNvbnN0cnVjdG9yIiwiVGFza1NlcnZpY2VPZmZsaW5lSW1wbC5nZXRUYXNrcyIsIlRhc2tTZXJ2aWNlT2ZmbGluZUltcGwuYWRkVGFzayIsIlRhc2tTZXJ2aWNlT2ZmbGluZUltcGwudXBkYXRlVGFzayIsIlRhc2tTZXJ2aWNlT2ZmbGluZUltcGwuZGVsZXRlVGFzayJdLCJtYXBwaW5ncyI6IkFBQUEscUJBQW9CLGVBQWUsQ0FBQyxDQUFBO0FBQ3BDLHVCQUF3QixXQUFXLENBQUMsQ0FBQTtBQUNwQyxxQkFBbUIsMEJBQTBCLENBQUMsQ0FBQTtBQUM5QyxzQ0FBb0MsZ0NBQWdDLENBQUMsQ0FBQTtBQVNyRTtJQUFBQTtJQXdDQUMsQ0FBQ0E7SUFuQ09ELGtDQUFRQSxHQUFmQTtRQUNDRSxNQUFNQSxDQUFDQSxZQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxrQkFBU0EsR0FBR0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FBQ0EsUUFBUUEsR0FBR0EsR0FBR0EsRUFBRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7SUFDM0dBLENBQUNBO0lBTU1GLGlDQUFPQSxHQUFkQSxVQUFlQSxJQUFVQTtRQUN4QkcsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FBQ0EsUUFB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QUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBO1FBQ2pDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUNuQkEsTUFBTUEsQ0FBQ0EsSUFBSUEsT0FBT0EsQ0FDakJBLFVBQVNBLE9BQU9BLEVBQUVBLE1BQU1BO1lBQ3ZCLE9BQU8sQ0FBQyxFQUFDLFlBQVksRUFBRSxFQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUMsRUFBQyxDQUFDLENBQUM7UUFDeEMsQ0FBQyxDQUNEQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUNNSCwyQ0FBVUEsR0FBakJBLFVBQWtCQSxJQUFVQTtRQUUzQkksTUFBTUEsQ0FBQ0EsSUFBSUEsT0FBT0EsQ0FDakJBLFVBQVNBLE9BQU9BLEVBQUVBLE1BQU1BO1lBQ3ZCLE9BQU8sQ0FBQyxFQUFDLFlBQVksRUFBRSxFQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FDREEsQ0FBQ0E7SUFDSEEsQ0FBQ0E7SUFDTUosMkNBQVVBLEdBQWpCQSxVQUFrQkEsSUFBVUE7UUFFM0JLLE1BQU1BLENBQUNBLElBQUlBLE9BQU9BLENBQ2pCQSxVQUFTQSxPQUFPQSxFQUFFQSxNQUFNQTtZQUN2QixPQUFPLENBQUMsRUFBQyxZQUFZLEVBQUUsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBQyxFQUFDLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQ0RBLENBQUNBO0lBQ0hBLENBQUNBO0lBQ0ZMLDZCQUFDQTtBQUFEQSxDQTlDQSxBQThDQ0EsSUFBQTtBQTlDWSw4QkFBc0IseUJBOENsQyxDQUFBIiwiZmlsZSI6InNlcnZpY2VzL1Rhc2tTZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHskaHR0cH0gZnJvbSBcInNlcnZpY2VzL2h0dHBcIjtcbmltcG9ydCB7UkVTVF9IT1NUfSBmcm9tIFwiLi4vY29uZmlnXCI7XG5pbXBvcnQge1Rhc2t9IGZyb20gJy4uL2NvbXBvbmVudHMvdGFza3MvdGFzayc7XG5pbXBvcnQge0F1dGhlbnRpY2F0aW9uU2VydmljZX0gZnJvbSAnc2VydmljZXMvQXV0aGVudGljYXRpb25TZXJ2aWNlJztcblxuZXhwb3J0IGludGVyZmFjZSBUYXNrU2VydmljZSB7XG5cdGdldFRhc2tzKCk6IFByb21pc2U8YW55Pjtcblx0YWRkVGFzayh0YXNrOlRhc2spOiBQcm9taXNlPGFueT47XG5cdHVwZGF0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55Pjtcblx0ZGVsZXRlVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+O1xufVxuXG5leHBvcnQgY2xhc3MgVGFza1NlcnZpY2VJbXBsIGltcGxlbWVudHMgVGFza1NlcnZpY2Uge1xuXG5cdC8qKlxuXHQgKiBAcmV0dXJucyBhIGxpc3Qgb2YgVGFzayBvYmplY3RzIGFzIGEgSmF2YVNjcmlwdCBBcnJheVxuXHQgKi9cblx0cHVibGljIGdldFRhc2tzKCk6IFByb21pc2U8YW55PiB7XG5cdFx0cmV0dXJuICRodHRwLmdldChSRVNUX0hPU1QgKyBcIi9hcGkvdGFza3MvXCIgKyB0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUgKyBcIi9cIiwgdGhpcy5nZXRVc2VyRGF0YSgpLnRva2VuKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0gdGFzayBpcyBhIFRhc2sgb2JqZWN0XG5cdCAqIEByZXR1cm5zIHNlcnZlciBfaWQgb2YgbmV3bHkgY3JlYXRlZCB0YXNrXG5cdCAqL1xuXHRwdWJsaWMgYWRkVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+IHtcblx0XHR0YXNrLnNldFVzZXJuYW1lKHRoaXMuZ2V0VXNlckRhdGEoKS51c2VybmFtZSk7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoUkVTVF9IT1NUICsgXCIvYXBpL3Rhc2tzL1wiICsgdGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lICsgXCIvXCIsIHRhc2ssIHRoaXMuZ2V0VXNlckRhdGEoKS50b2tlbik7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHRhc2sgaXMgYSBUYXNrIG9iamVjdFxuXHQgKiBAcmV0dXJucyBzZXJ2ZXIgX2lkIG9mIHVwZGF0ZWQgdGFza1xuXHQgKi9cblx0cHVibGljIHVwZGF0ZVRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0dGFzay5zZXRVc2VybmFtZSh0aGlzLmdldFVzZXJEYXRhKCkudXNlcm5hbWUpO1xuXHRcdHJldHVybiAkaHR0cC5wdXQoUkVTVF9IT1NUICsgXCIvYXBpL3Rhc2tzL1wiICsgdGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lICsgXCIvXCIgKyB0YXNrLl9pZCArIFwiL1wiLCB0YXNrLCB0aGlzLmdldFVzZXJEYXRhKCkudG9rZW4pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB0YXNrIGlzIGEgVGFzayBvYmplY3Rcblx0ICogQHJldHVybnMgc2VydmVyIF9pZCBvZiBkZWxldGVkIHRhc2tcblx0ICovXG5cdHB1YmxpYyBkZWxldGVUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT4ge1xuXHRcdHRhc2suc2V0VXNlcm5hbWUodGhpcy5nZXRVc2VyRGF0YSgpLnVzZXJuYW1lKTtcblx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKFJFU1RfSE9TVCArIFwiL2FwaS90YXNrcy9cIiArIHRoaXMuZ2V0VXNlckRhdGEoKS51c2VybmFtZSArIFwiL1wiICsgdGFzay5faWQgKyBcIi9cIiwgdGFzaywgdGhpcy5nZXRVc2VyRGF0YSgpLnRva2VuKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0VXNlckRhdGEoKSB7XG5cdFx0bGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJqd3RcIik7XG5cdFx0cmV0dXJuIHsgdXNlcm5hbWU6IG5ldyBBdXRoZW50aWNhdGlvblNlcnZpY2UoKS5nZXRVc2VybmFtZSh0b2tlbiksIHRva2VuOiB0b2tlbiB9O1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBUYXNrU2VydmljZU9mZmxpbmVJbXBsIGltcGxlbWVudHMgVGFza1NlcnZpY2Uge1xuXHRwcml2YXRlIGdvUnVuOiBUYXNrID0gbmV3IFRhc2soXCJHbyBmb3IgYSBydW5cIiwgMSk7XG5cdHByaXZhdGUgZ29TaG93ZXI6IFRhc2sgPSBuZXcgVGFzayhcIkdvIGhhdmUgYSBzaG93ZXJcIiwgMik7XG5cdHByaXZhdGUgdGFza3M6IEFycmF5PFRhc2s+ID0gbmV3IEFycmF5PFRhc2s+KCk7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy50YXNrcy5wdXNoKHRoaXMuZ29SdW4pO1xuXHRcdHRoaXMudGFza3MucHVzaCh0aGlzLmdvU2hvd2VyKTtcblx0fVxuXG5cdC8ve19pZDogMSwgdXNlcl9pZDogMSwgZGVzY3JpcHRpb246IFwiZGVzY3JpcHRpb25cIiwgdGl0bGU6IFwiR28gZm9yIGEgcnVuXCIsIGFzc2lnbmVlOiBcIkFzc2lnbmVlXCJ9LFxuXHQvL3tfaWQ6IDIsIHVzZXJfaWQ6IDEsIGRlc2NyaXB0aW9uOiBcImRlc2NyaXB0aW9uXCIsIHRpdGxlOiBcIlNob3dlclwiLCBhc3NpZ25lZTogXCJBc3NpZ25lZVwifSxcblxuXHRwdWJsaWMgZ2V0VGFza3MoKTogUHJvbWlzZTxhbnk+IHtcblx0XHRsZXQgdGhhdCA9IHRoaXM7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKFxuXHRcdFx0ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdHJlc29sdmUoe2FjdGlvblJlc3VsdDogdGhhdC50YXNrc30pO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH1cblx0cHVibGljIGFkZFRhc2sodGFzazogVGFzayk6IFByb21pc2U8YW55PiB7XG5cdFx0bGV0IG5leHRJZCA9IHRoaXMudGFza3MubGVuZ3RoKys7XG5cdFx0dGFzay5zZXRJZChuZXh0SWQpO1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShcblx0XHRcdGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRyZXNvbHZlKHthY3Rpb25SZXN1bHQ6IHtfaWQ6IG5leHRJZH19KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cdHB1YmxpYyB1cGRhdGVUYXNrKHRhc2s6IFRhc2spOiBQcm9taXNlPGFueT4ge1xuXHRcdC8vIFRPRE8gaW1wbGVtZW50XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKFxuXHRcdFx0ZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdHJlc29sdmUoe2FjdGlvblJlc3VsdDoge19pZDogdGFzay5faWR9fSk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXHRwdWJsaWMgZGVsZXRlVGFzayh0YXNrOiBUYXNrKTogUHJvbWlzZTxhbnk+IHtcblx0XHQvLyBUT0RPIGltcGxlbWVudFxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShcblx0XHRcdGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRyZXNvbHZlKHthY3Rpb25SZXN1bHQ6IHtfaWQ6IHRhc2suX2lkfX0pO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==